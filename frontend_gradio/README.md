# 视频人物训练集提取系统 - Gradio 前端

基于 Gradio 5.x 构建的简洁训练GUI界面，专为视频人物训练集提取系统设计。

## 特性

- 🎯 **简洁易用**: 基于 Gradio 5 的现代化界面设计
- 📹 **多视频处理**: 支持批量上传和处理多个视频文件
- 🖼️ **参考图片**: 可选的参考图片上传，用于角色匹配
- ⚙️ **灵活配置**: 丰富的处理参数配置选项
- 📊 **实时状态**: 实时查看处理进度和状态
- 🚀 **快速启动**: 一键启动，无需复杂配置

## 安装依赖

```bash
pip install -r requirements.txt
```

主要依赖：
- gradio>=5.45.0 (最新 Gradio 5 版本)
- requests>=2.31.0
- pillow>=10.0.0

## 启动方式

### Windows
```bash
start.bat
# 或者从项目根目录
start_gradio.bat
```

### Linux/macOS
```bash
chmod +x start.sh
./start.sh
```

### 手动启动
```bash
python app.py
```

启动后访问: http://localhost:7860

## 使用流程

1. **上传视频文件**: 支持多个视频文件同时上传
2. **上传参考图片** (可选): 用于角色匹配的参考图片
3. **配置处理参数**:
   - 最大提取帧数
   - 场景变化阈值
   - 图像质量阈值
   - 标签置信度阈值
   - 角色标签阈值
4. **开始处理**: 点击开始处理按钮
5. **监控进度**: 使用查看状态功能实时监控

## 参数说明

### 核心参数
- **最大提取帧数**: 每个视频最多提取的帧数 (默认: 200)
- **批处理大小**: 批量处理的图片数量 (默认: 8)

### 检测阈值
- **场景变化阈值**: 场景变化检测敏感度，越小越敏感 (默认: 0.3)
- **图像质量阈值**: 图像质量过滤阈值 (默认: 0.5)

### 标签阈值
- **标签置信度阈值**: 一般标签的最低置信度 (默认: 0.35)
- **角色标签阈值**: 角色标签的最低置信度，通常较高 (默认: 0.75)

## 后端依赖

确保后端服务正在运行:
```bash
# 从项目根目录启动后端
start_backend.bat
# 或
cd backend && python -m app.main
```

后端服务地址: http://localhost:8000

## 界面特性

### Gradio 5 新特性
- ✨ 现代化UI设计，基于 Gradio 5 的最新主题
- 🚀 服务端渲染 (SSR) 支持，更快的加载速度
- 📱 响应式设计，支持移动端访问
- 🎨 改进的组件样式和交互体验

### 功能模块
- **文件上传区域**: 支持拖拽上传，多文件选择
- **参数配置面板**: 直观的滑块和数值输入控件
- **状态监控**: 实时状态显示和详细信息展示
- **操作控制**: 清晰的按钮布局和操作流程

## 文件结构

```
frontend_gradio/
├── app.py              # 主应用文件
├── requirements.txt    # Python依赖
├── start.bat          # Windows启动脚本
├── start.sh           # Linux/macOS启动脚本
├── README.md          # 说明文档
└── temp_uploads/      # 临时上传目录（自动创建）
```

## 错误处理

- 自动检测后端连接状态
- 友好的错误信息提示
- 上传文件类型验证
- 处理状态异常处理

## 开发说明

修改配置:
```python
# app.py 中的配置
BACKEND_URL = "http://localhost:8000"  # 后端服务地址
TEMP_DIR = "temp_uploads"              # 临时文件目录
```

自定义端口:
```python
# app.py 末尾
demo.launch(
    server_port=7860,  # 修改端口
    share=False,       # 是否创建公共链接
    debug=True         # 调试模式
)
```